<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui" xmlns:c="http://java.sun.com/jsp/jstl/core">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<p:carousel numVisible="1" itemStyle="height:410px;width:1250px;" effect="easeInStrong" headerText="Life Surrender Proposal" style="margin-bottom:0">
		<p:tab id="policyInfo" title="Policy Info">
			<p:panel header="Policy Info" style="border:none;min-height:400px;">
				<table width="100%">
					<tr>
						<td valign="top" width="33%">
							<table>
								<tr>
									<td>
										<h:outputText value="Policy No" />
									</td>
									<td>
										<p:inputText value="#{proposal.policyNo}" readonly="true" style="width:250px;" />
									</td>
								</tr>
								<tr>
									<td>
										<h:outputText value="Sum Insured" />
									</td>
									<td>
										<p:inputText value="#{proposal.lifePolicy.sumInsured}" readonly="true" style="width:250px;">
											<f:convertNumber pattern="#{ApplicationSetting.currencyFormat}"/>
										</p:inputText>
									</td>
								</tr>
								<tr>
									<td>
										<h:outputText value="Payment Time" />
									</td>
									<td>
										<p:inputText autoResize="true" value="#{proposal.lifePolicy.lastPaymentTerm}" readonly="true" style="width:250px;"/>
									</td>
								</tr>
								<tr>
									<td>
										<h:outputText value="Payment Type" />
									</td>
									<td>
										<p:inputText value="#{proposal.lifePolicy.paymentType.name}" readonly="true" style="width:250px;"/>
									</td>
								</tr>
								<tr>
									<td>
										<h:outputText value="Start Date" />
									</td>
									<td>
										<p:inputText value="#{proposal.lifePolicy.policyInsuredPersonList.get(0).startDate}" readonly="true" style="width:250px;">
											<f:convertDateTime pattern="#{ApplicationSetting.dateFormat}" timeZone="#{ApplicationSetting.timeZone}"/>
										</p:inputText>
									</td>
								</tr>
								<tr>
									<td>
										<h:outputText value="End Date" />
									</td>
									<td>
										<p:inputText value="#{proposal.lifePolicy.policyInsuredPersonList.get(0).endDate}" readonly="true" style="width:250px;">
											<f:convertDateTime pattern="#{ApplicationSetting.dateFormat}" timeZone="#{ApplicationSetting.timeZone}"/>
										</p:inputText>
									</td>
								</tr>
								<tr>
									<td>
										<h:outputText value="Emcompass Date" />
									</td>
									<td>
										<p:inputText value="#{proposal.lifePolicy.activedPolicyEndDate}"  readonly="true" style="width:250px;">
											<f:convertDateTime pattern="#{ApplicationSetting.dateFormat}" timeZone="#{ApplicationSetting.timeZone}"/>
										</p:inputText>
									</td>
								</tr>
							</table>
						</td>
						<td valign="top" width="33%">
							<fieldset>
								<legend>
									<h:outputText value="Customer" />
								</legend>
								<table>
									<tr>
										<td>
											<h:outputText value="Customer Name" />
										</td>
										<td>
											<p:inputText value="#{proposal.lifePolicy.customerName}"  readonly="true" style="width:250px;" />
										</td>
									</tr>
									<tr>
										<td valign="top">
											<h:outputText value="NRC" rendered="#{proposal.lifePolicy.customer != null}"/>
										</td>
										<td>
											<p:inputText value="#{proposal.lifePolicy.customerNRC}" style="width:250px;" readonly="true" rendered="#{proposal.lifePolicy.customer != null}" />
										</td>
									</tr>
									<tr>
										<td valign="top">
											<h:outputText value="Registration No" rendered="#{proposal.lifePolicy.organization != null}"/>
										</td>
										<td>
											<p:inputText value="#{proposal.lifePolicy.organization.regNo}" style="width:250px;" readonly="true" rendered="#{proposal.lifePolicy.organization != null}"/>
										</td>
									</tr>
									<tr>
										<td valign="top">
											<h:outputText value="Customer Address" />
										</td>
										<td>
											<p:inputTextarea autoResize="true" value="#{proposal.lifePolicy.customerAddress}" readonly="true" style="width:250px;" />
										</td>
									</tr>
									<tr>
										<td valign="top">
											<h:outputText value="Insured Person" />
										</td>
										<td>
											<p:inputText autoResize="true" value="#{proposal.lifePolicy.policyInsuredPersonList.get(0).fullName}" readonly="true" style="width:250px;" />
										</td>
									</tr>
									<tr>
										<td valign="top">
											<h:outputText value="NRC" />
										</td>
										<td>
											<p:inputText autoResize="true" value="#{proposal.lifePolicy.policyInsuredPersonList.get(0).idNo}" readonly="true" style="width:250px;" />
										</td>
									</tr>
									<tr>
										<td valign="top">
											<h:outputText value="Date Of Birth" />
										</td>
										<td>
											<p:inputText autoResize="true" value="#{proposal.lifePolicy.policyInsuredPersonList.get(0).dateOfBirth}" readonly="true" style="width:250px;">
												<f:convertDateTime pattern="#{ApplicationSetting.dateFormat}" timeZone="#{ApplicationSetting.timeZone}"/>
											</p:inputText>
										</td>
									</tr>
									<tr>
										<td valign="top">
											<h:outputText value="Address" />
										</td>
										<td>
											<p:inputTextarea  autoResize="true" value="#{proposal.lifePolicy.policyInsuredPersonList.get(0).residentAddress.fullResidentAddress}" readonly="true"  style="width:250px;"/>
										</td>
									</tr>
								</table>
							</fieldset>
						</td>
						<td valign="top" width="33%">
							<fieldset>
								<legend>
									<h:outputText value="Policy Insured Person" />
								</legend>
								<table>
									
									<tr>
										<td valign="top">
											<h:outputText value="Insured Person" />
										</td>
										<td>
											<p:inputText autoResize="true" value="#{proposal.lifePolicy.policyInsuredPersonList.get(0).fullName}" readonly="true" style="width:250px;" />
										</td>
									</tr>
									<tr>
										<td valign="top">
											<h:outputText value="NRC" />
										</td>
										<td>
											<p:inputText autoResize="true" value="#{proposal.lifePolicy.policyInsuredPersonList.get(0).idNo}" readonly="true" style="width:250px;" />
										</td>
									</tr>
									<tr>
										<td valign="top">
											<h:outputText value="Date Of Birth" />
										</td>
										<td>
											<p:inputText autoResize="true" value="#{proposal.lifePolicy.policyInsuredPersonList.get(0).dateOfBirth}" readonly="true" style="width:250px;">
												<f:convertDateTime pattern="#{ApplicationSetting.dateFormat}" timeZone="#{ApplicationSetting.timeZone}"/>
											</p:inputText>
										</td>
									</tr>
									<tr>
										<td valign="top">
											<h:outputText value="Address" />
										</td>
										<td>
											<p:inputTextarea  autoResize="true" value="#{proposal.lifePolicy.policyInsuredPersonList.get(0).residentAddress.fullResidentAddress}" readonly="true" style="width:250px;"/>
										</td>
									</tr>
								</table>
							</fieldset>
						</td>
					</tr>
				</table>
			</p:panel>
		</p:tab>
		<p:tab id="proposalinfo" title="Proposal Info">
			<p:panel header="Proposal Info" style="border:none;min-height:400px;">
				<table>
					<tr>
						<td valign="top">
							<table>
								<tr>
									<td>
										<h:outputText value="Proposal No" />
									</td>
									<td>
										<p:inputText value="#{proposal.proposalNo}" readonly="true" style="width:250px;" />
									</td>
								</tr>
								<tr>
									<td>
										<h:outputText value="Submitted Date" />
									</td>
									<td>
										<p:inputText value="#{proposal.submittedDate}" readonly="true" style="width:250px;">
											<f:convertDateTime pattern="#{ApplicationSetting.dateFormat}" timeZone="#{ApplicationSetting.timeZone}"/> 
										</p:inputText>
									</td>
								</tr>
								<tr>
									<td>
										<h:outputText value="Sale Man" />
									</td>
									<td>
										<p:inputText value="#{proposal.saleMan.fullName}" readonly="true" style="width:250px;"/>
									</td>
								</tr>
								<tr>
									<td>
										<h:outputText value="Branch" />
									</td>
									<td>
										<p:inputText value="#{proposal.branch.name}" readonly="true" style="width:250px;"/>
									</td>
								</tr>
								<ui:repeat var="keyfactor" value="#{proposal.lifeSurrenderKeyFactors}">
									<tr>
										<td>
											<h:outputText value="#{keyfactor.keyFactor.value}" />
										</td>
										<td>
											<p:inputText value="#{keyfactor.value}" readonly="true" style="width:250px;"/>
										</td>
									</tr>
								</ui:repeat>
								<tr>
									<td>
										<h:outputText value="Surrender Amount" />
									</td>
									<td>
										<p:inputText value="#{proposal.surrenderAmount}" readonly="true" style="width:250px;">
											<f:convertNumber pattern="#{ApplicationSetting.currencyFormat}"/>
										</p:inputText>
									</td>
								</tr>
								<tr>
									<td>
										<h:outputText value="Received Premium" />
									</td>
									<td>
										<h:panelGrid columns="2">
											<p:inputText value="#{proposal.receivedPremium}" readonly="true" style="width:215px;">
												<f:convertNumber pattern="#{ApplicationSetting.currencyFormat}"/>
											</p:inputText>
											<p:commandButton id="detailsProposal" icon="ui-icon-star" immediate="true" oncomplete="PF('paymentDialog').show()"/>
										</h:panelGrid>
									</td>
								</tr>
								<tr>
									<td>
										<h:outputText value="Life Premium" />
									</td>
									<td>
										<p:inputText autoResize="true" value="#{proposal.lifePremium}" readonly="true" style="width:250px;">
											<f:convertNumber pattern="#{ApplicationSetting.currencyFormat}"/>
										</p:inputText>
									</td>
								</tr>
								<tr>
									<td>
										<h:outputText value="Status" />
									</td>
									<td>
										<p:inputText value="#{proposal.approved ? 'APPROVED' : 'REJECT'}" readonly="true" style="width:250px;"/>
									</td>
								</tr>
							</table>
						</td>
					</tr>
				</table>
			</p:panel>
		</p:tab>
		<p:tab id="workFlowInfo" title="Remark">
			<p:panel header="Remark" id="workflowWizardPanel" style="border:none;min-height:400px;">
				<p:dataTable value="#{workFlowList}" var="workflow" id="workflow" style="width:100%">
					<p:column headerText="From" width="18%">
						<h:outputText value="#{workflow.createdUser.name}" />
					</p:column>
					<p:column headerText="To" width="18%">
						<h:outputText value="#{workflow.responsiblePerson.name}" />
					</p:column>
					<p:column headerText="Task">
						<h:outputText value="#{workflow.workflowTask.label}" />
					</p:column>
					<p:column headerText="Remark">
						<h:outputText value="#{workflow.remark}" />
					</p:column>
					<p:column headerText="Date"  width="13%">
						<h:outputText value="#{workflow.workflowDate}">
							<f:convertDateTime pattern="#{ApplicationSetting.dateTimeFormat}" timeZone="#{ApplicationSetting.timeZone}" />
						</h:outputText>
					</p:column>
				</p:dataTable>
			</p:panel>
		</p:tab>
	</p:carousel>
	<p:dialog header="Payment Details Of #{proposal.policyNo}" widgetVar="paymentDialog" resizable="false" showEffect="explode" hideEffect="explode" id="paymentDialog" 
			 appendTo="@(body)" dynamic="true" modal="true">
         <p:dataTable value="#{paymentList}" paginator="true" rows="10" paginatorPosition="top"
			paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}" 
			var="payment" rowIndexVar="rowIndex">
	             <p:column headerText="No">
	                <h:outputText value="#{rowIndex + 1}" />
	             </p:column>
	             <p:column headerText="Receipt No">
	                <h:outputText value="#{payment.receiptNo}" />
	             </p:column>
	             <p:column headerText="Payment Date">
	                <h:outputText value="#{payment.paymentDate}">
	                	<f:convertDateTime pattern="#{ApplicationSetting.dateFormat}" timeZone="#{ApplicationSetting.timeZone}"/>
	                </h:outputText>
	             </p:column>
	             <p:column headerText="Payment Channel">
	                <h:outputText value="#{payment.paymentChannel}"/>
	             </p:column>
	             <p:column headerText="Payment Type">
	                <h:outputText value="#{payment.paymentType}"/>
	             </p:column>
	             <p:column headerText="FromTerm">
	                <h:outputText value="#{payment.fromTerm}"/>
	             </p:column>
	             <p:column headerText="ToTerm">
	                <h:outputText value="#{payment.fromTerm}"/>
	             </p:column>
	              <p:column headerText="Premium">
	                <h:outputText value="#{payment.premium}">
	                	<f:convertNumber pattern="#{ApplicationSetting.currencyFormat}"/>
	                </h:outputText>
	             </p:column>
	    </p:dataTable>
		<p:commandButton immediate="true" value="Close" oncomplete="PF('paymentDialog').hide()" />
	</p:dialog>
</ui:composition>